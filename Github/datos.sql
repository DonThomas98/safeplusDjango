-- Create model UserProfile
--

create TABLE AUTH_USER (
ID	NUMBER(11,0) primary key not null,
PASSWORD	NVARCHAR2(128 CHAR),
LAST_LOGIN	TIMESTAMP(6),
IS_SUPERUSER	NUMBER(1,0),
USERNAME	NVARCHAR2(150 CHAR),
FIRST_NAME	NVARCHAR2(150 CHAR),
LAST_NAME	NVARCHAR2(150 CHAR),
EMAIL	NVARCHAR2(254 CHAR),
IS_STAFF	NUMBER(1,0),
IS_ACTIVE	NUMBER(1,0),
DATE_JOINED	TIMESTAMP(6)
);

CREATE TABLE "ACCOUNT_USERPROFILE" ("ID" NUMBER(11) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL PRIMARY KEY,
 "RUT" NUMBER(11) NOT NULL, 
 "SUELDO" NUMBER(11) NOT NULL, 
 "EDAD" NUMBER(11) NOT NULL,
  "USER_ID" NUMBER(11) NOT null ,
       FOREIGN KEY (USER_ID) REFERENCES AUTH_USER(ID)
NULL UNIQUE);
--


-- Create model Multa
--
CREATE TABLE "MULTA" ("ID" NUMBER(11) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL PRIMARY KEY, 
"MONTO_MULTA" NUMBER(19) NOT NULL,
 "DESCRIPCION" NVARCHAR2(50) NULL,
  "FECHA_MULTA" DATE NOT NULL, 
  "MULTA_CLIENTE_ID" NUMBER(11) NOT NULL,
         FOREIGN KEY (MULTA_CLIENTE_ID) REFERENCES AUTH_USER(ID)
);
--

-- Create model VisitaTerreno
--
CREATE TABLE "VISITA_TERRENO" ("ID" NUMBER(11) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL PRIMARY KEY,
 "FECHA_VISITA" DATE NOT NULL, 
 "MOTIVO_VISITA"	NVARCHAR2(50 CHAR),
 "RUT_CLIENTE_ID" NUMBER(11) NOT NULL, 
 "RUT_TRABAJADOR_ID" NUMBER(11) NOT NULL,
          FOREIGN KEY (RUT_CLIENTE_ID) REFERENCES AUTH_USER(ID),
        FOREIGN KEY (RUT_TRABAJADOR_ID) REFERENCES AUTH_USER(ID)
        );      
--
-- Create model InformeVisita
--
CREATE TABLE "INFORME_VISITA" ("ID" NUMBER(11) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL PRIMARY KEY,
 "INTRODUCCION" NVARCHAR2(250) NULL,
  "RESULTADOS_EVALUACION" NVARCHAR2(500) NULL, 
  "AUTOEVALUACION" NVARCHAR2(1) NULL,
   "DOC_ACTUALIZADOS" NVARCHAR2(1) NULL,
    "REG_INTERNO" NVARCHAR2(1) NULL, 
    "DOC_SEREMI_TRABAJO" NVARCHAR2(1) NULL,
     "COPIA_DOCUMENTOS" NVARCHAR2(1) NULL,
      "INFORMA_RIESGOS" NVARCHAR2(1) NULL,
       "INFORMA_MEDIDAS" NVARCHAR2(1) NULL, 
        "PROGRAMA_ORDEN" NVARCHAR2(1) NULL,
        "EXTINTORES" NVARCHAR2(1) NULL, 
        "CAPACITACION_EXTINTOR" NVARCHAR2(1) NULL, 
        "EPP_INVENTARIO" NVARCHAR2(1) NULL, 
        "EPP_CERTIFICADOS" NVARCHAR2(1) NULL,
        "ID_VISITA_ID" NUMBER(11) NOT NULL UNIQUE,
            FOREIGN KEY (ID_VISITA_ID) REFERENCES VISITA_TERRENO(ID)

        
        );
--

-- Create model MaterialCapacitaciones
--
CREATE TABLE "MATERIAL_CAPACITACIONES" ("ID" NUMBER(11) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL PRIMARY KEY, 
"MATERIAL" NVARCHAR2(50) NULL);
--

-- Create model Capacitacion
--
CREATE TABLE "CAPACITACION" ("ID" NUMBER(11) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL PRIMARY KEY,
 "FECHA_SOLICITUD" DATE NOT NULL, 
 "FECHA_CAPACITACION" DATE NOT NULL,
 "HORA_CAPACITACION" NVARCHAR2(50 CHAR) not NULL, 

  "RUT_CLIENTE_ID" NUMBER(11) NOT NULL, 
  "RUT_TRABAJADOR_ID" NUMBER(11) NOT NULL,
        FOREIGN KEY (RUT_CLIENTE_ID) REFERENCES AUTH_USER(ID),
          FOREIGN KEY (RUT_TRABAJADOR_ID) REFERENCES AUTH_USER(ID)
);
--

-- Create model MaterialSolicitado
--
CREATE TABLE "MATERIAL_SOLICITADO" ("ID" NUMBER(11) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL PRIMARY KEY,
 "CANTIDAD" NUMBER(19) NOT NULL, 
 "ID_MATERIAL_ID" NUMBER(11) NOT NULL,
  "MATERIAL_CAPACITACION_ID" NUMBER(11) NOT NULL,
    FOREIGN KEY (ID_MATERIAL_ID) REFERENCES MATERIAL_CAPACITACIONES(ID),
        FOREIGN KEY (MATERIAL_CAPACITACION_ID) REFERENCES Capacitacion(ID)

);
--
-- Create model Accidente
--
CREATE TABLE "ACCIDENTE" ("ID" NUMBER(11) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL PRIMARY KEY, 
"NATURALEZA" NVARCHAR2(25) NULL, 
"PARTES_ACCIDENTADAS" NVARCHAR2(25) NULL,
 "FUENTE_ACCIDENTE" NVARCHAR2(25) NULL,
  "FECHA_ACCIDENTE" DATE NOT NULL,
   "RUT_CLIENTE_ID" NUMBER(11) NOT NULL,
    FOREIGN KEY (RUT_CLIENTE_ID) REFERENCES AUTH_USER(ID));
--
-- Create model asesoria_fiscalizacion

CREATE TABLE "FISCALIZACION" ("ID" NUMBER(11) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL PRIMARY KEY, 
"DOC_REVISADOS" NVARCHAR2(50) NULL,
"DESCRIPCION_DOCUMENTO" NVARCHAR2(50) NULL,
 "DOCUMENTO" NCLOB NULL,
    "RUT_CLIENTE_ID" NUMBER(11) NOT NULL,
        FOREIGN KEY (RUT_CLIENTE_ID) REFERENCES AUTH_USER(ID)


        );

  
   

---- Create model Asesoria

CREATE TABLE "ASESORIA" ("ID" NUMBER(11) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL PRIMARY KEY, 
"EVENTO" NVARCHAR2(25) NULL,
 "PROPUESTA" NVARCHAR2(500) NULL,
  "ASESORIA_ESPECIAL" NVARCHAR2(2) NULL,
   "ID_ACCIDENTE_ID" NUMBER(11) NULL,
      "ID_fiscalizacion_id" NUMBER(11) NULL,
       FOREIGN KEY (ID_ACCIDENTE_ID) REFERENCES ACCIDENTE(ID),

       FOREIGN KEY (ID_fiscalizacion_id) REFERENCES FISCALIZACION(ID)

   );
--
--

-- Create model Contrato
--
CREATE TABLE "CONTRATO" ("ID" NUMBER(11) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL PRIMARY KEY,
 "DESCRIPCION" NVARCHAR2(30) NULL,
  "COSTO" NUMBER(19) NOT NULL, 
  "FECHA_CONTRATACION" DATE NOT NULL, 
  "RUT_CLIENTE_ID" NUMBER(11) NOT NULL UNIQUE,
    FOREIGN KEY (RUT_CLIENTE_ID) REFERENCES AUTH_USER(ID));

  
--

-- Create model RegistroPagos
--
CREATE TABLE "REGISTRO_PAGOS" ("ID" NUMBER(11) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL PRIMARY KEY,
 "MONTO_PAGO" NUMBER(19) NOT NULL, 
 "FECHA_PAGO" DATE NOT NULL, 
 "ID_CONTRATO_ID" NUMBER(11) NOT NULL,
     FOREIGN KEY (ID_CONTRATO_ID) REFERENCES CONTRATO(ID)

 
 );

CREATE TABLE "COSTO_ADICIONAL" ("ID" NUMBER(11) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL PRIMARY KEY,
 "MONTO_ADICIONAL" NUMBER(19) NOT NULL, 
 "FECHA_COSTOADICIONAL" DATE NOT NULL, 
 "ID_CONTRATO_ID" NUMBER(11) NOT NULL,
     FOREIGN KEY (ID_CONTRATO_ID) REFERENCES CONTRATO(ID)

 
 );



--






